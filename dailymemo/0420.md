### 느슨한 설게 vs 단단한 설계

일반적으로 erd 설계하거나 jpa 쓸 때 연관관계 맺고 fk를 걸어둔다(단단한 설계)

그런데 실무에서는 fk 안 걸어두는 경우도 많음 (느슨한 설계)
- NoSql 유행하면서 좀 넘어옴

왜? fk 걸어둔다는 건 제약을 거는 것 -> db 무결성 측면에서는 좋지만, 반대로 그만큼 사이드이펙트도 많아지고 신경 쓸 것도 많아짐. db 변동 생기면 연결된 얘들도 우르르 영향 받음. 특히 변동이 생긴 게 fk를 걸어둔 칼럼이면? ㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷ

그니까 말그래도 '이론상 좋음'

따라서 실무에서는 fk를 거의 안 걸어두고 sql문으로 join해서 처리하는 경우도 많음

느슨한 설계해보니까 느낀 점: 사실 우리 플젝은 규모가 엄청 크지 않고 지속적으로 운영/업데이트 되는 플젝은 아니라 사이드이펙트를 체감할 일이 많진 않았음. 장점이라면 연관관계가 없으니까 N+1문제 등으로부터 자유로운 점? 단점이라면 연관관계가 없으니까 JPA에서 엔티티 단위로 조회가 안되고 fetch join 같은 메서드 사용 불가, 그리고 레포지토리에서 엔티티로 연결해서 조회가 안되고 jpql로 일일이 join해서 dto로 반환해야됨(귀찮고 유지보수 측면에서 좀 떨어짐)

결론: 너무 단단하게도 말고 너무 느슨하게도 말고 적당히

### 클린코드란 뭘까

1. 응집도 - 비슷한 놈들끼리 뭉쳐두기
2. 추상화 - 메서드로 분리하기 (본 코드에는 메서드로 딱 알 수 있게 하고 내부 원리는 메서드 안에다가)
3. 단일책임 - 한 번에 하나씩

솔직히 말은 좋은데 같다 붙이기 나름인듯... 그 유명한 클린코드도 막상 실무에선 안된다 어쩐다 하면서 욕먹는 거 보면...

알고리즘 풀듯이 반복문이랑 조건문 도배하는 게 싫어서 optional이나 stream이나 람다식쓰면서 좀 더 함수형 선언형으로 프로젝트를 많이 할려고 하는데 그러다 든 생각.

오늘 억지로 map안에 람다식 넣으면서 하니까 오히려 코드가 더 알아먹기 힘들어서 그냥 전통적인 조건문 써서 했떠니 훨씬 더 깔끔했음.

결론은 너무 규칙 세워서 억지로 하는 것보다 작업하는 팀 내에서 코딩 컨벤션으로 큰 방향이나 틀만 잡아두는 게 중요한듯

근데 주석은 확실히 잘 다는 게 좋은듯

